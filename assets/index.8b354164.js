var J=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var P=(t,e,a)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,T=(t,e)=>{for(var a in e||(e={}))E.call(e,a)&&P(t,a,e[a]);if(M)for(var a of M(e))V.call(e,a)&&P(t,a,e[a]);return t},A=(t,e)=>X(t,Z(e));var j=t=>typeof t=="symbol"?t:t+"",L=(t,e)=>{var a={};for(var r in t)E.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&M)for(var r of M(t))e.indexOf(r)<0&&V.call(t,r)&&(a[r]=t[r]);return a};var g=(t,e,a)=>(P(t,typeof e!="symbol"?e+"":e,a),a);import{j as R,r as h,u as Q,a as G,L as N,l as ee,c as te,s as S,b as ae,d as re,e as D,B as ie,R as ne,f as C,N as se,g as oe,h as le}from"./vendor.9cb685c8.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}};ce();const i=R.exports.jsx,c=R.exports.jsxs;const de=({value:t})=>c("span",{style:{background:"black",padding:10,color:`hsl(${t},100%,50%)`},children:[t.toFixed(0),"%"]},void 0),he=({value:t=0})=>c("span",{style:{background:"black",padding:10,color:t>0?"lime":t==0?"grey":"red"},children:[t.toFixed(0)," $"]},void 0),ue=({maxLoss:t,maxWin:e,profitChance:a,takeProfit:r,stopLoss:n})=>{const s=a/100*(e*(r/100))-(1-a/100)*(t*n/100);return i("div",{className:"result",children:c("div",{className:"field",children:[i("p",{children:c("b",{children:["Reward on risk: ",i(de,{value:e/t*100},void 0)]},void 0)},void 0),i("p",{children:c("b",{children:["Long term profit: ",i(he,{value:s},void 0)]},void 0)},void 0)]},void 0)},void 0)},$="accountSize",y=({label:t,value:e,setValue:a,minValue:r=1,maxValue:n,step:s=1})=>c("div",{className:"field",children:[c("label",{children:[i("span",{className:"title",children:t},void 0),r,i("input",{type:"range",step:s,min:r,max:n,value:e,onChange:({target:{value:o}})=>a(Number(o))},void 0)," ",n||1e3]},void 0),i("div",{children:i("input",{type:"number",value:e,onChange:({target:{value:o}})=>{a(Number(o))}},void 0)},void 0)]},void 0),pe=()=>{const[t,e]=h.exports.useState(Number(localStorage.getItem($))||1e4),[a,r]=h.exports.useState(1),[n,s]=h.exports.useState(1),[o,f]=h.exports.useState(50),[v,m]=h.exports.useState(100),[b,u]=h.exports.useState(100);return c("div",{className:"calculator",children:[c("div",{className:"inputs",children:[c("div",{className:"left",children:[i("div",{className:"field",children:c("label",{children:["Account size (will be remembered):"," ",i("input",{type:"number",value:t,onChange:({target:{value:k}})=>{localStorage.setItem($,k),e(Number(k))}},void 0)," ","$"]},void 0)},void 0),i(y,{label:"$ Max loss",value:a,setValue:r,maxValue:t/10},void 0),i(y,{label:"$ Max win",value:n,setValue:s,maxValue:t/10},void 0),i(y,{label:"% Profit chance",value:o,setValue:f,maxValue:100},void 0)]},void 0),c("div",{className:"right",children:[i(y,{label:"Take profit %",value:v,minValue:0,setValue:m,maxValue:100,step:5},void 0),i(y,{label:"Stop loss %",value:b,minValue:0,setValue:u,maxValue:100,step:5},void 0)]},void 0)]},void 0),i(ue,{maxWin:n,maxLoss:a,profitChance:o,takeProfit:v,stopLoss:b},void 0)]},void 0)},me=({choice:t})=>!t||!t.isLeaf?null:c("main",{children:[t.description,i("ul",{children:t.checkboxes.map((e,a)=>i("li",{children:c("label",{children:[i("input",{type:"checkbox"},void 0),e]},void 0)},a))},void 0),t.image?i("img",{height:200,src:t.image,alt:"hello"},void 0):null]},void 0);class l{constructor(e,a,r,n=[],s=""){g(this,"id");g(this,"_checkboxes");g(this,"_imagename");g(this,"label");g(this,"description");g(this,"_level",0);g(this,"_isSelected",!1);g(this,"_callbacks",[]);g(this,"_nextChoices");g(this,"parent");this.id=e,this._checkboxes=n,this._imagename=s,this.label=a,this.description=r,this._nextChoices=[]}get isLeaf(){return this._nextChoices.length===0}get level(){return this._level}get image(){return this._imagename?`/strathelper/stratimages/${this._imagename}.png`:void 0}get nextChoices(){return[...this._nextChoices]}get checkboxes(){return[...this._checkboxes]}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this._callbacks.forEach(a=>a(e))}onStateChange(e){return this._callbacks.push(e),()=>{this._callbacks=this._callbacks.filter(a=>a!=e)}}getParent(){return this.parent}setParent(e){this.parent=e}addNextChoice(e){return this.adjustLevels(e),e.setParent(this),this._nextChoices.push(e),this}select(){var e;this.isSelected=!0,(e=this.parent)==null||e.escalateChangeUpwards(this.id),this._nextChoices.forEach(a=>a.escalateChangeDownwards())}escalateChangeUpwards(e){var a;this._isSelected=!0,this.parent&&((a=this.parent)==null||a.escalateChangeUpwards(this.id)),this._nextChoices.forEach(r=>{r.id!==e&&r.escalateChangeDownwards()})}escalateChangeDownwards(){this.isSelected=!1,this._nextChoices.forEach(e=>e.escalateChangeDownwards())}adjustLevels(e){e._level++,e._nextChoices.forEach(a=>{this.adjustLevels(a)})}}const O=new l("irany","Ir\xE1ny elk\xE9pzel\xE9s",""),z=new l("mentes","Ir\xE1nymentes","");O.addNextChoice(new l("bull","Emelked\xE9s","").addNextChoice(new l("bull-low-iw","Alacsony IV","").addNextChoice(new l("call-debit-spread","Call debit spread","",["60-90 nap","alacsony ivr, v\xE1rhat\xF3an marad is","kis m\xE9ret <= 1%","25-50% c\xE9l profit","ITM long Call","OTM short Call"],"vertical-bull-spread")).addNextChoice(new l("call-calendar-spread","Call calendar spread","debit",["20-30 nap front month","alacsony ivr front month, magasabb back month","kis m\xE9ret <= 1%","25-50% c\xE9l profit","OTM short Call front month","OTM long Call back month same strike","\xF6sszehasonl\xEDtottam a PUT v\xE1ltozattal","SPY-ra ink\xE1bb PUT-ot"],"calendar-spread")).addNextChoice(new l("call-ratio-spread","Call (Ratio) backspread","nagy mozg\xE1st v\xE1rok",["60-90 nap front month","alacsony ivr front month, magasabb back month","kis m\xE9ret <= 1%","early profit 25-50%","1 ATM short Call","2 OTM long Call higher strike"],"call-ratio-backspread")).addNextChoice(new l("put-diagonal-spread","Put diagonal spread","debit",["20+ nap front month","alacsony ivr front month, m\xE9g alacsonyabb back month","kis m\xE9ret <= 1%","early profit 25-50%","1 OTM short Put front month","1 OTM long Put back month lower price"],"put-diagonal-spread"))).addNextChoice(new l("bull-high-iw","Magas IV","").addNextChoice(new l("put-credit-spread","Put credit spread","",["30-60 nap","k\xF6z\xE9p-magas IV","lehet magasabb 2-5% balance","50% c\xE9l","OTM short Put","OTM long Put lower price"],"vertical-bull-spread")).addNextChoice(new l("short-naked-put","Short naked put","!!!!!!!!!!! fedezetlen !!!!!!!!!!",["nem baj, ha kapok ilyen stockot","30-60 nap","magas IV (\xE9rdemes HV-t hozz\xE1 n\xE9zni)","\xF3vatos 1-2% kezd\u0151 margin","OTM short Put","50%-n\xE1l elhozni, vagy rollolni"],"short-put")).addNextChoice(new l("put-broker-butterfly","Put Broken Wing Butterfly","credit with no risk to the upside",["30-60 nap","some credit at least","magas IV","lehet b\xE1trabb 3-5%","50-75% c\xE9l profit, ink\xE1bb hamarabb lez\xE1rni ha lehet","1 ITM long Put","2 OTM short Put near ATM","1 OTM long Put (skip 1 strike)"],"put-broken-butterfly")).addNextChoice(new l("jade-lizard","Jade lizard","es\u0151 IV, emelked\u0151 stock",["30-60nap","\xF3vatos 1-2% initial margin","50% k\xF6r\xFCli c\xE9l profit","OTM short Put","OTM short call","OTM long call higher price"],"jade-lizard")))).addNextChoice(new l("bear","Es\xE9s","").addNextChoice(new l("bear-low-iv","Alacsony IV","").addNextChoice(new l("put-debit-spread","Put debit spread","",["60-90 nap","nem cs\xF6kken tov\xE1bb IV","1% balance","25-50% target profit","ITM long Put","OTM short Put"],"vertical-bear-spread")).addNextChoice(new l("put-calendar-spread","Put calendar spread","debit",["ATM vagy kicsit magasabb strike","20+ front month","1% balance","front month magasabb IV mint back month","korai profit c\xE9l 25-50%","OTM short Put front month","OTM long Put back month same strike"],"calendar-spread")).addNextChoice(new l("put-ratio-backspread","Put (Ratio) backspread","1:2 vagy 2:3",["60-90 nap","alacsonyabb IV","1% balance","25% profit el\xE9g, ha nem hoz hamar t\xF6bbet","1 ATM short Put","2 OTM long Put lower strike"],"put-ratio-backspread")).addNextChoice(new l("call-diagonal-spread","Call diagonal spread","",["20+ nap front month","1% balance","25-50% c\xE9l","front month magasbb IV mint back month","1 OTM short Call front month","1 OTM long Call back month higher strike"],"call-diagonal-spread"))).addNextChoice(new l("bear-high-iv","Magas IV","").addNextChoice(new l("call-credit-spread","Call credit spread","",["magasabb vola","30-60nap","3-5% balance","50% c\xE9l el\xE9g az ir\xE1ny riziko miatt","OTM short call","OTM long call higher strike"],"vertical-bear-spread")).addNextChoice(new l("short-naked-call","Short naked call","!!!!!!!!!!!!!!! fedezetlen !!!!!!!!!!!!!!!",["OTM short call (lehet\u0151leg t\xE1volabb)","30-60 nap","1-2% initial margin","50% m\xE1r el\xE9g"],"short-call")).addNextChoice(new l("call-broken-butterfly","Call broken wing butterfly","credit with no downside risk",["30-60nap","3-5% balance","75% c\xE9l\xE1r, had dolgozzon","1 ITM long Call","2 OTM short Call near ATM","1 long OTM Call (skip 1 strike)"],"call-broken-butterfly")).addNextChoice(new l("reverse-jade-lizard","Reverse jade lizard","!!!! fedezetlen. es\u0151 IV, es\u0151 stock",["IV esik ha a papir is","30-60nap","1-2% initial margin","50% c\xE9l\xE1r","OTM short Call","OTM short Put","OTM long Put lower price"],"reverse-jade-lizard"))));z.addNextChoice(new l("neutral-low-iv","Alacsony IV","Ilyet ne csin\xE1lj ink\xE1bb :(")).addNextChoice(new l("neutral-high-iv","Magas IV","").addNextChoice(new l("short-straddle","Short straddle","!!!!! fedezetlen",["nincs m\xE1s fedezetlen pozi nyitva","magas IV, ennek az es\xE9s\xE9re is sz\xE1m\xEDtok","30-60nap","1-2% initial margin","25% j\xF3 c\xE9l","ATM short Put","ATM short Call"],"short-straddle")).addNextChoice(new l("short-strangle","Short strangle","!!!!! fedezetlen",["nincs m\xE1s fedezetlen pozi nyitva","t\xE9nyleg magas IV","2SD ink\xE1bb","csak nagyon likvid term\xE9kre, indexek ink\xE1bb","40+ nap","1-2% initial margin","50% j\xF3 c\xE9l, de kor\xE1bban is lehet, vagy rollolni","ATM short Put","ATM short Call"],"short-strangle")).addNextChoice(new l("iron-condor","Iron Condor","",["magas de nem t\xFAl magas IV","70% k\xF6r\xFCl (1SD)","likvid term\xE9kre \xE9rdemes","30-60 nap","3-5% balance","50% j\xF3 c\xE9l","OTM long Put lower price","OTM short Put","OTM short Call","OTM long Call higher price"],"short-strangle")).addNextChoice(new l("iron-butterfly","Iron Butterfly","",["nincs m\xE1s fedezetlen pozi nyitva","magas de nem t\xFAl magas IV","long l\xE1bak 1SD k\xF6r\xFCl","likvid term\xE9kre \xE9rdemes, indexek ink\xE1bb","30-60 nap","3-5% balance","25% j\xF3 c\xE9l","OTM long Put","ATM short Put","ATM short Call","OTM long Call"],"iron-butterfly")));const ge=new l("fake","faketop","").addNextChoice(O).addNextChoice(z),ve=[O,z];class fe{constructor(){g(this,"topChoices");this.topChoices=ve}findChoiceById(e){return this.findChoice(e,ge)}findChoice(e,a){return a.id===e?a:a.nextChoices.reduce((n,s)=>n||this.findChoice(e,s),void 0)}}const B=new fe,F=({choice:t,onSelect:e})=>{const[a,r]=h.exports.useState(t.isSelected);h.exports.useEffect(()=>{const s=t.onStateChange(o=>{r(o)});return()=>{s()}},[]);const n=()=>a?i("div",{className:"level",children:t.nextChoices.map(s=>i(F,{choice:s,onSelect:e},s.id))},void 0):null;return c("div",{children:[c("span",{className:`${a?"selected":""} choice`,onClick:()=>{t.select(),e(t)},children:[a?"[x]":"[ ]"," ",t.label]},void 0),n()]},void 0)},be=({onChoiceSelected:t})=>i("aside",{children:i("ul",{children:B.topChoices.map(e=>i(F,{choice:e,onSelect:t},e.id))},void 0)},void 0);const U=()=>{const{id:t}=Q(),e=G(),a=t?B.findChoiceById(t):void 0;return a&&!a.isSelected&&a.select(),c("div",{className:"finder",children:[i(be,{onChoiceSelected:r=>{e(`/strats/${r.id}`)}},void 0),i(me,{choice:a},void 0)]},void 0)};const ke=()=>c("div",{className:"menu",children:[i(N,{to:"/strats",children:"Strategies"},void 0),i(N,{to:"/calculator",children:"Calculator"},void 0),i(N,{to:"/finder",children:"Finder"},void 0)]},void 0);function W(t,e){const a=e.optionType==="C",r=e.strikePrice<t,n=Math.abs(e.tradePrice);return a&&!r||!a&&r?-e.position*n*100:e.position*(-1*n*100+(e.strikePrice-t)*100*(e.optionType==="C"?-1:1))}function xe(t,e){return e.trades.reduce((a,r)=>a+W(t,r),0)}const Ce={getGroupPLAtExpiry:xe,getTradePLAtExpiry:W},ye=({data:t,xScale:e,yScale:a})=>{const r=h.exports.useRef(null);return h.exports.useEffect(()=>{if(!r.current)return;const n=ee().x(s=>e(s[0])).y(s=>a(s[1])).curve(te);S(r.current).transition().attr("d",n(t))},[t]),i("path",{ref:r,transform:"translate(5,0)",fill:"none",stroke:"blue",strokeWidth:2},void 0)},we=({data:t,xScale:e,svgHeight:a})=>{const r=h.exports.useRef(null);return h.exports.useEffect(()=>{if(!r.current)return;const n=ae(e);S(r.current).transition().call(n)},[t]),i("g",{ref:r,transform:`translate(50, ${a/2})`},void 0)},Me=({data:t,yScale:e})=>{const a=h.exports.useRef(null);return h.exports.useEffect(()=>{if(!a.current)return;const r=re(e);S(a.current).transition().call(r)},[t]),i("g",{ref:a,transform:"translate(50,0)"},void 0)},Pe=t=>{let e=0,a=0;if(t.trades.length>1){const r=t.trades.reduce((f,v)=>f+v.strikePrice,0)/t.trades.length,n=t.trades.map(f=>f.strikePrice),s=Math.min(...n),o=Math.max(...n);e=s-(r-s)/2,a=o+(o-r)/2}else{const r=Math.abs(t.trades[0].tradePrice*100);e=t.trades[0].strikePrice-2*r,a=t.trades[0].strikePrice+2*r}return[e,a]},Te=({chartData:t})=>{const e=600,a=400,[r,n]=Pe(t),s=u=>Ce.getGroupPLAtExpiry(u,t);let o=[];const f=Math.abs(n-r)/e||100;for(let u=r;u<=n;u+=f)o.push([u,s(u)]);const v=D().domain([r,n]).range([0,e]),m=o.reduce((u,k)=>Math.max(u,Math.abs(k[1])),0)*1.2,b=D().domain([-m,m]).range([a,0]);return c("svg",{width:e,height:a,children:[i(ye,{data:o,xScale:v,yScale:b},void 0),i(we,{data:o,xScale:v,svgHeight:a},void 0),i(Me,{data:o,yScale:b},void 0)]},void 0)},Ne="https://kuzditomi-strathelper.herokuapp.com";async function Se(t){const e=`${Ne}/price?ticker=${t}`;return await(await fetch(e)).json()}const Oe=t=>Object.keys(t.callExpDateMap),ze=(t,e)=>Object.keys(t.callExpDateMap[e]),Ie=(t,e,a,r,n)=>{const o=(r=="C"?t.callExpDateMap:t.putExpDateMap)[e][a][0].mark;return{underlying:t.symbol,position:n,expiration:new Date(e.split(":")[0]),optionType:r,strikePrice:Number(a),tradePrice:o}};function _e(t){const[e,a]=h.exports.useState(!1),[r,n]=h.exports.useState(),[s,o]=h.exports.useState();return h.exports.useEffect(()=>{if(!t){n(void 0),o(void 0);return}a(!0),(async()=>{try{const m=await Se(t);n(m),o(Oe(m))}finally{a(!1)}})()},[t]),{isLoading:e,expiries:s,getStrikes:m=>{if(!r)throw Error("Strikes were read while optionchain is not loaded");return ze(r,m)},getOption:(m,b,u,k)=>{if(!r)throw Error("Option were read while optionchain is not loaded");return Ie(r,m,b,u,k)}}}const Ee=()=>{const t=h.exports.useRef(null),[e,a]=h.exports.useState(""),[r,n]=h.exports.useState(""),[s,o]=h.exports.useState({}),{isLoading:f,expiries:v,getStrikes:m,getOption:b}=_e(e),u=function(d,p,x,w=1){const Y=b(r,x,p,w);if(s[d]){if(s[d].position+=w,s[d].position===0){const _=s,{[d]:Ae}=_,q=L(_,[j(d)]);o(q);return}o(T({},s));return}o(A(T({},s),{[d]:Y}))},k=()=>f?i("p",{children:"Loading..."},void 0):v?i("div",{className:"expiries",children:v.map(d=>i("button",{onClick:()=>{n(d),o({})},children:d.split(":")[0]},d))},void 0):null,I=({strike:d,type:p})=>{const x=`${p}${d}${r}`;return i("td",{align:"center",className:s[x]?s[x].position>0?"plus":"minus":"",children:i("button",{onClick:w=>{u(x,p,d,w.ctrlKey?-1:1)},children:p},void 0)},void 0)},H=()=>{if(!r)return null;const d=m(r);return i("div",{className:"prices",children:i("table",{children:c("tbody",{children:[i("tr",{children:d.map(p=>i(I,{expiry:r,strike:p,type:"C"},r+p+"C"))},void 0),i("tr",{children:d.map(p=>i("td",{align:"center",children:p},p))},void 0),i("tr",{children:d.map(p=>i(I,{expiry:r,strike:p,type:"P"},r+p+"P"))},void 0)]},void 0)},void 0)},void 0)},K=()=>{if(!Object.keys(s).length)return null;const d={expiration:new Date(r),underlying:e,trades:Object.values(s)};return i("div",{className:"chart",children:i(Te,{chartData:d},void 0)},void 0)};return c("div",{children:[c("div",{className:"ticker",children:[c("label",{children:["Ticker:",i("input",{type:"text",ref:t},void 0)]},void 0),i("button",{onClick:()=>{var d;((d=t==null?void 0:t.current)==null?void 0:d.value)&&a(t.current.value),n("")},children:"GO"},void 0)]},void 0),k(),H(),K()]},void 0)};function Ve(){return i("div",{className:"app",children:c(ie,{basename:"/strathelper",children:[i(ke,{},void 0),c(ne,{children:[i(C,{path:"/calculator",element:i(pe,{},void 0)},void 0),i(C,{path:"/finder/",element:i(Ee,{},void 0)},void 0),i(C,{path:"/strats/:id",element:i(U,{},void 0)},void 0),i(C,{path:"/strats/",element:i(U,{},void 0)},void 0),i(C,{path:"/",element:i(se,{to:"/strats",replace:!0},void 0)},void 0)]},void 0)]},void 0)},void 0)}oe.render(i(le.StrictMode,{children:i(Ve,{})}),document.getElementById("root"));
